var isDesktopWidth=!0;$(window).width()<768&&(isDesktopWidth=!1);var CampusMap=function(n){var e,t,a,o,i,s,r,c,g,u,h,p,d,m,f,v,y,_,k,b,w,C,T,L,M,x,z,I,S,n=$.extend({},{simple:!1,canvas_id:"map-canvas",pan_control:!0,zoom_control:!0,street_view_control:!0,map_type_control:!0,infobox_location_id:null,illustrated:!1},n),E=["emergency-aeds","emergency-phones"],j=n.points,O=n.base_ignore_types,P=n.urls.static,D=n.urls.search,N=n.urls.location,W=n.urls.parking_json,B=n.urls.dining,R=n.urls.parking_kml,A=n.urls.buildings_kml,q=n.urls.sidewalks_kml,U=n.urls.bikeracks,V=n.urls.phones,G=n.urls.aeds,Z=n.urls.stations,H=n.urls.base_url,F=search_query_get,K=n.simple,Y=null,J=[],Q=null,X=null,ee=null,te=null,ne=null,ae=null,oe=null,ie=0,le=new function(){var h=this;this.get_illustrated_tile=function(e,t){var n=2.5,a=3.5,o=Math.pow(2,t-13);return'url("https://cdn.ucf.edu/map/tiles/'+(t<12||e.y<0||e.x<0||12===t&&(1<e.y||2<e.x)||e.x>=n*o||e.y>=a*o?"white.png":"zoom-"+t+"/"+t+"-"+e.x+"-"+e.y+".jpg")+"?_="+(new Date).getTime()+'")'},this.highlight_term=function(e,t,n){if(void 0!==n&&n){var a=e.match(/<a([^>]+)>([^<]*)<\/a>/);return null!=a?"<a"+a[1]+">"+le.highlight_term(a[2],t)+"</a>":e}var o=e.toLowerCase().indexOf(t.toLowerCase());return-1<o?e.substr(0,o)+'<span class="highlight">'+e.substr(o,t.length)+"</span>"+e.substr(o+t.length):e},this.parse_keycode=function(e){return document.layers?e.which:document.all||document.getElementById?e.keyCode:0},this.get_google_image=function(e){return{url:P+"images/markers/"+e+".png",size:new google.maps.Size(20,20)}},this.highlight_location=function(n,a){(a=$.extend({func:void 0,pan:!1,reset_zoom_center:!0,sublocation:!1},a)).sublocation||oe.clear();var e=N;"null"!==n&&(e=N.replace(".json","/"+n+".json")),$.ajax({url:e,dataType:"json",success:function(c,e,t){var g=ee.mapTypeId,u="illustrated"===g?"illustrated_point":"googlemap_point";"illustrated"===g?X.zoom:Q.zoom,"illustrated"===g?X.center:Q.center;void 0!==a.func&&a.func(c),"group"==c.object_type?(Y=n,ee.panTo(new google.maps.LatLng(c[u][0],c[u][1])),$.each(c.locations.ids,function(e,r){h.highlight_location(r,{sublocation:!0}),e==c.locations.ids.length-1&&$("body").bind("highlight-location-loaded",function(e,t){if(t==r&&($("body").unbind("highlight-location-loaded"),void 0!==c[u])){var n,i=[],l=0,s=0,a=null,o=.09,a=K||"illustrated"==g?16:19;for($.each(oe.infos,function(e,t){var n=t.box.getPosition();null!=n&&i.push(n)}),$.each(i,function(a,o){$.each(i,function(e,t){var n;a==e||0<(n=h.calc_distance(o,t))&&(l+=n,s+=1)})}),n=l/s;o<n;)o+=.05,--a;K?ee.setZoom(a-1):("illustrated"==g?(a<12&&(a=12),16<a&&(a=16)):a=a<15?15:a,ee.setZoom(a))}})}),null!=ne&&ne.change_buttons({loc_id:n,title:c.name})):void 0!==c[u]&&null!=c[u]&&(oe.register(new ce(c[u],c.name,{link:c.profile_link})),a.sublocation||(Y=n,null!=ne&&ne.change_buttons({loc_id:n,title:c.name})),ee.panTo(new google.maps.LatLng(c[u][0],c[u][1])),$("body").trigger("highlight-location-loaded",[n]))}})},this.calc_distance=function(e,t){var n=e.lat(),a=e.lng(),o=t.lat(),i=t.lng();return n*=Math.PI/180,a*=Math.PI/180,o*=Math.PI/180,i*=Math.PI/180,6371*Math.acos(Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos(i-a))},this.resize_canvas=function(){var e=Number($(window).height())-(100+Number($("#map header").height())+Number($("footer").height())),t=e-($("#search").height()+90);$("#map-canvas").height(e).fadeIn(),0===ie&&(ie=t<500?t:500)}};function se(e,t){this.lat=e,this.lon=t,this.count=1,this.odd_flip=!0}function re(){return Math.round(10*Math.random())+Math.round(10*Math.random())}function ce(e,t,n){var a,o=this,i=new google.maps.LatLng(e[0],e[1]),l=null;(this.box=null)!==(n=$.extend({},{link:null,pan:!1},n)).link&&(t='<a href="'+n.link+'">'+t+"</a>"),l=$('<div class="iBox"><a class="iclose"></a>'+t+"</div>"),a=$('<div id="testBox" class="iBox">'+l+"</div>")[0],$("body").append(a),l.find(".iclose").click(function(e){e.preventDefault(),o.box.close()}),l=l[0],this.box=new InfoBox({content:l,alignBottom:!0,pixelOffset:new google.maps.Size(-18,-3),maxWidth:0,closeBoxURL:"",pane:"floatPane",infoBoxClearance:new google.maps.Size(1,1),enableEventPropagation:!1}),this.box.setPosition(i),this.box.open(ee),n.pan&&ee.panTo(i),this.close=function(){o.box.close()}}function ge(e){var t=this;this.active=!1,this.name=e,this.layer=null,this.markers=null,this.gpsMarkers=null,this.toggle=function(){t.active?t.deactivate():t.activate()},this.activate=function(){1!=t.active&&(t.active=!0,null!=t.layer&&t.layer.setMap(ee),null!=t.markers&&$.each(t.markers,function(e,t){t.setVisible(!0)}))},this.deactivate=function(){0!=t.active&&(t.active=!1,null!=t.layer&&t.layer.setMap(null),null!=t.markers&&$.each(t.markers,function(e,t){t.setVisible(!1)}),null!=t.gpsMarkers&&$.each(t.gpsMarkers,function(e,t){t.setVisible(!1)}))}}function ue(){"undefined"!=typeof console&&console.log(arguments)}le.resize_canvas(),"undefined"!=typeof google?(3<(t=(window.location+"").split("/")).length&&(t=t.splice(3),$.each(t,function(e,t){if("map"!=t&&""!=t)if("illustrated"==t)n.illustrated=!0;else if("emergency"==t)for(l in E)J.push(E[l]);else J.push(t)})),$zoom=getZoom(),a={mapTypeIds:[]},isDesktopWidth&&(a={mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN,"illustrated"],position:google.maps.ControlPosition.RIGHT_BOTTOM}),Q={zoom:$zoom,center:new google.maps.LatLng(28.6018,-81.1995),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:n.pan_control,panControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},zoomControl:n.zoom_control,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_BOTTOM},streetViewControl:n.street_view_control,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControl:n.map_type_control,mapTypeControlOptions:a},X={zoom:14,center:new google.maps.LatLng(85.04591,-179.94189),mapTypeId:"illustrated",panControl:n.pan_control,zoomControl:n.zoom_control,streetViewControl:n.street_view_control,mapTypeControl:n.map_type_control},e={tileSize:new google.maps.Size(256,256),minZoom:12,maxZoom:16,getTile:function(e,t,n){var a=n.createElement("div");return a.style.width=this.tileSize.width+"px",a.style.height=this.tileSize.height+"px",a.style.backgroundImage=le.get_illustrated_tile(e,t),a},name:"Illustrated",alt:"Show illustrated map"},google.maps.visualRefresh=!0,(ee=new google.maps.Map(document.getElementById(n.canvas_id),n.illustrated?X:Q)).mapTypes.set("illustrated",e),google.maps.event.addListener(ee,"maptypeid_changed",function(){var e=ee.mapTypeId,t="illustrated"===e?X:Q,n=ae.get_layer("gpoints"),a=ae.get_layer("ipoints");ee.setZoom(t.zoom),ee.setCenter(t.center),"illustrated"==e?(n.deactivate(),a.activate()):(a.deactivate(),n.activate()),oe.clear(),null!=Y&&le.highlight_location(Y)}),n.simple||($(window).resize(le.resize_canvas),te=new function(){function i(g){u.empty().show(),u.height(ie),clearTimeout(n),n=setTimeout(function(){u.append('<li><a data-pk="searching">Searching&hellip;</a></li>'),a=$.getJSON([D,"json"].join("."),{q:g},function(a,e,t){var n,o,i,l,s,r,c;u.empty(),a&&a.results&&void 0!==a.results&&(n=a.results.locations,o=a.results.organizations,n.length?(i=[],l=[],s=[],$.each(n,function(e,n){var t=le.highlight_term(n.link,g,!0);n.orgs=[],$.each(o,function(e,t){n.id==t.bldg_id&&(t.name=le.highlight_term(t.name,g),n.orgs.push(t))}),n.orgs.length&&n.link!=t?(n.link=t,i.push(n)):n.orgs.length?l.push(n):n.link!=t&&(n.link=t,s.push(n))}),r="",c=0,$.each(i.concat(l,s),function(e,t){var n="";if(c+=t.orgs.length,$.each(t.orgs,function(e,t){n+="<li>"+t.name+"</li>"}),""!=n&&(n="<ul>"+n+"</ul>"),r+="<li>"+t.link+n+"</ul>",11<c)return r+='<li class="more"><a href="'+a.results_page_url+'">More Results &hellip;</a></li>',!1;c++}),u.append(r)):u.append('<li><a data-pk="null">No results</a></li>'))})},400)}var l=this,e=null,t=null,u=null,n=null,a=null,s=37,r=39,c=16,g=17,h=18,p=224,d=40,m=38,f=27;e=function(){var e=null,t=null,n=null,a=null,o=null,e=document.createElement("div"),t=document.createElement("form"),n=document.createElement("input"),a=document.createElement("a");return icon=document.createElement("i"),o=document.createElement("ul"),e.id="search",e.style.zIndex=9999,t.method="get",t.action=D,t.id="search-form",n.type="text",n.name="q",n.autocomplete="off",n.placeholder="Search Map",icon.className="fa fa-search fa-2x",a.id="search-submit",a.title="search icon",a.onclick=v,a.appendChild(icon),o.id="search-results",o.style.display="none",t.appendChild(n),t.appendChild(a),e.appendChild(t),e.appendChild(o),e}(),ee.controls[google.maps.ControlPosition.TOP_LEFT].push(e),e=$(e),t=e.find("input"),u=e.find(" > ul"),""!==F&&"None"!==F&&(t.val(F),i(F));function v(){$("#search-form").submit()}function y(){null!=a&&a.abort()}$(document).click(function(e){0===$(e.target).closest("#search").length&&u.hide()}),t.focus(function(e){""!=$(this).val()&&$(this).trigger("keyup")}).keydown(function(e){le.parse_keycode(e)}).keyup(function(e){var t,n,a=le.parse_keycode(e),o=$(this).val();y(),-1===$.inArray(a,[s,r,c,g,h,p])&&(a===d?(n=null,(n=(t=u.find(".hover")).length?(t.removeClass("hover"),t.next()):u.find("li:first")).addClass("hover"),$("body").trigger("search-result-highlighted",[n])):a===m?(n=null,(n=(t=u.find(".hover")).length?(t.removeClass("hover"),t.prev()):u.find("li:last")).addClass("hover"),$("body").trigger("search-result-highlighted",[n])):a===f?(y(),l.hide_results()):""===o?u.hide():i(o))}),this.hide_results=function(){u.empty().hide()}},ne=new function(){var e=this,n=$("#menu-wrap"),a=$("#menu-window"),o=$("#tab-one"),i=$("#tab-two"),t=$("#menu-header").width()-10,l=$("menu_stage");function s(){var e=t-o.width();i.is(":visible")&&(e-=i.width()),$("#menu .gap").width(e)}a.equalHeights(),s(),$(".nav").click(function(){var e=$(this).attr("data-nav");$.cookie("menu_page",e),--e,a.animate({"margin-left":"-"+230*Number(e)},300)}),$("#menu-hide,#menu-screen").click(function(e){e.preventDefault();var t=$("#menu-screen");t.is(":visible")?(a.slideDown(),t.hide(),n.removeClass("closed").animate({opacity:1},300)):(a.slideUp(),n.animate({opacity:.5},300,function(){n.addClass("closed")}),t.show())}),o.click(function(){e.change_tabs()}),i.click(function(){e.change_tabs({label:$(this).text(),html:l.html()})}),this.change_buttons=function(e){var t,n,a={loc_id:!1,title:!1,subject:"UCF Campus Map",body:escape("UCF Campus Map\nhttps://map.ucf.edu/"),print:H+"/print/?",toggle_illustrated:!1},o=$.extend({},a,e),i="illustrated"===ee.mapTypeId;if(o.toggle_illustrated){var l=(l=$("#print").attr("href")).replace("&illustrated","");return i&&(l+="&illustrated"),void $("#print").attr("href",l)}o.loc_id&&(t=escape(o.title),n=H+"/?show="+o.loc_id,n=escape(n),o.subject=escape("UCF Campus Map - ")+t,o.body=t+escape("\n")+n,o.print=o.print+"&show="+o.loc_id);var s="mailto:?subject="+o.subject+"&body="+o.body;$("#email").attr("href",s),i&&(o.print=o.print+"&illustrated"),$("#print").attr("href",o.print)},this.change_buttons(),this.change_tabs=function(e,t){var n=$.extend({},{label:!1,html:!1},e);n.label||n.html?(i.removeClass("off"),o.addClass("off"),n.label&&$("#menu-title").html(n.label),i.show(),n.html&&($("#menu-stage").empty(),n.html instanceof jQuery?n.html.appendTo("#menu-stage"):$("#menu-stage").html(n.html)),a.animate({"margin-left":-690},300),s(),a.equalHeights()):(a.animate({"margin-left":0},300),o.removeClass("off"),i.addClass("off")),void 0!==t&&"function"==typeof t&&t()},ee.controls[google.maps.ControlPosition.RIGHT_TOP].push(n[0])},MOBILE_MENU=new function(){var a,r,n=$("#mobile-menu"),e=$(".menu-item"),o=new google.maps.InfoWindow({content:"<div>You are here!</div>"}),c=$(".loading-target");function t(){n.addClass("slide-out"),n.height($(document).height())}function g(){n.removeClass("slide-out")}function u(e){clearTimeout(r);var t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),n={url:P+"/images/markers/location.png",size:new google.maps.Size(25,25)};a?(a.setPosition(t),ee.panTo(t),o.open(ee,a)):(a=new google.maps.Marker({position:t,map:ee,icon:n,title:"You are here!"}),ee.panTo(t),o.open(ee,a),google.maps.event.addListener(a,"click",function(e){o.open(ee,a)})),c.closest(".menu-highlight").removeClass("menu-highlight"),c.toggleClass("fa-spinner fa-pulse fa-compass"),g()}function h(e){switch(clearTimeout(r),c.closest(".menu-highlight").removeClass("menu-highlight"),c.toggleClass("fa-spinner fa-pulse fa-compass"),e.code){case e.PERMISSION_DENIED:ue("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable. Verify that GPS is enabled.");break;case e.TIMEOUT:alert("The request to get location timed out.");break;case e.UNKNOWN_ERROR:alert("Unable to get location.")}}function p(){c.closest(".menu-highlight").removeClass("menu-highlight"),c.toggleClass("fa-spinner fa-pulse fa-compass"),alert("Location information is unavailable. Verify that GPS is enabled.")}function i(e){var t,n,a,o=$(e.target),i=o.closest("h4").attr("data-menu");switch(n=(t=o).closest("li"),a=n.find("ul").eq(0),t.is("label")&&n.toggleClass("menu-highlight"),(!n.attr("data-menu-highlight")||n.attr("data-menu-highlight")&&!0===n.attr("data-menu-highlight"))&&n.toggleClass("menu-highlight"),a.length&&a.slideToggle(function(){n.find(".toggle-icon").eq(0).toggleClass("fa-chevron-down fa-chevron-up")}),i){case"location":c.toggleClass("fa-spinner fa-pulse fa-compass"),navigator.geolocation?(r=setTimeout(p,5e3),navigator.geolocation.getCurrentPosition(u,h)):(alert("Geolocation is not supported by this browser."),g());break;case"parking":ae.get_layer("parking").toggle();break;case"emergency":var s=!0;for(l in E)1!=ae.get_layer(E[l]).active&&(s=!1);for(l in E)1==s?ae.get_layer(E[l]).deactivate():ae.get_layer(E[l]).activate();break;case"food":ae.get_layer("food").toggle(),g()}}$("#mobile-menu-trigger").click(t),$(document).click(function(e){var t=$(e.target);t.closest("#mobile-menu").length||t.closest("#mobile-menu-trigger").length||200<n.width()&&g()}),n.find(".close-icon").click(g),e.click(i)}),oe=new function(){var t=this;this.infos=[],this.register=function(e){t.infos.push(e)},this.clear=function(){$.each(t.infos,function(e,t){t.close()}),t.infos=[]}},n.simple||(ae=new function(){var t=this;this.layers=[],this.get_layer=function(n){var a=null;return $.each(t.layers,function(e,t){if(t.name==n)return a=t,!1}),a},this.load_all_layers=function(){$.each(t.layers,function(e,t){t.toggle()})},this.register_layer=function(e){t.layers.push(e)}},isDesktopWidth&&ae.register_layer(((S=new ge("traffic")).layer=new google.maps.TrafficLayer,S)),isDesktopWidth&&ae.register_layer(((I=new ge("sidewalks")).layer=new google.maps.KmlLayer(q,{preserveViewport:!0,suppressInfoWindows:!0,clickable:!1}),I)),isDesktopWidth&&ae.register_layer(((z=new ge("gpoints")).markers=(M=[],x={building:le.get_google_image("building"),parkinglot:le.get_google_image("parking"),group:le.get_google_image("group"),location:le.get_google_image("location")},$.each(j,function(t,e){var n,a=e.gpoint;null!=a&&-1==$.inArray(e.type,O)&&(n=new google.maps.Marker({position:new google.maps.LatLng(a[0],a[1]),map:ee,icon:x[e.type],location:t,visible:!1}),M.push(n),google.maps.event.addListener(n,"click",function(e){le.highlight_location(t)}))}),M),z)),isDesktopWidth&&ae.register_layer(((L=new ge("ipoints")).markers=(C=[],T={building:le.get_google_image("building"),parkinglot:le.get_google_image("parking"),group:le.get_google_image("group"),location:le.get_google_image("blue")},$.each(j,function(t,e){var n,a=e.ipoint;null!=a&&-1==$.inArray(e.type,O)&&(n=new google.maps.Marker({position:new google.maps.LatLng(a[0],a[1]),map:ee,icon:T[e.type],location:t,visible:!1}),C.push(n),google.maps.event.addListener(n,"click",function(e){le.highlight_location(t)}))}),C),L)),isDesktopWidth&&ae.register_layer(((w=new ge("buildings")).layer=new google.maps.KmlLayer(A,{preserveViewport:!0,suppressInfoWindows:!0,clickable:!1}),w)),isDesktopWidth&&ae.register_layer(((b=new ge("bikeracks")).markers=(_=[],k={url:P+"/images/markers/bicycle.png",size:new google.maps.Size(25,25)},$.ajax({url:U,dataType:"json",async:!1,success:function(e,t,n){void 0!==e.features&&$.each(e.features,function(e,t){t.geometry&&t.geometry.coordinates&&_.push(new google.maps.Marker({clickable:!1,position:new google.maps.LatLng(t.geometry.coordinates[0],t.geometry.coordinates[1]),icon:k,map:ee,visible:!1}))})}}),_),b)),ae.register_layer(((y=new ge("emergency-phones")).markers=(v=[],$.ajax({url:V,dataType:"json",async:!1,success:function(e,t,n){var a={url:P+"/images/markers/phone.png",size:new google.maps.Size(25,25)};void 0!==e.features&&$.each(e.features,function(e,t){t.geometry&&t.geometry.coordinates&&v.push(new google.maps.Marker({clickable:!1,position:new google.maps.LatLng(t.geometry.coordinates[0],t.geometry.coordinates[1]),map:ee,visible:!1,icon:a}))})}}),v),y)),ae.register_layer(((f=new ge("emergency-aeds")).markers=(m=[],$.ajax({url:G,dataType:"json",async:!1,success:function(e,t,n){var a={url:P+"/images/markers/aed.png",size:new google.maps.Size(25,25)};void 0!==e.features&&$.each(e.features,function(e,t){t.geometry&&t.geometry.coordinates&&m.push(new google.maps.Marker({clickable:!1,position:new google.maps.LatLng(t.geometry.coordinates[0],t.geometry.coordinates[1]),map:ee,visible:!1,icon:a}))})}}),m),f)),isDesktopWidth&&ae.register_layer(((d=new ge("charging-stations")).markers=(p=[],$.ajax({url:Z,dataType:"json",async:!1,success:function(e,t,n){var a={url:P+"/images/markers/ev.png",size:new google.maps.Size(32,32)};void 0!==e.features&&$.each(e.features,function(e,t){t.geometry&&t.geometry.coordinates&&p.push(new google.maps.Marker({clickable:!1,position:new google.maps.LatLng(t.geometry.coordinates[0],t.geometry.coordinates[1]),map:ee,visible:!1,icon:a}))})}}),p),d)),ae.register_layer(((h=new ge("parking")).layer=new google.maps.KmlLayer(R,{preserveViewport:!0,suppressInfoWindows:!0}),h.markers=(u=[],$.ajax({url:W,dataType:"json",async:!1,success:function(e){var n={url:P+"images/markers/handicap.png",size:new google.maps.Size(25,25)};void 0!==e.handicap&&$.each(e.handicap,function(e,t){u.push(new google.maps.Marker({icon:n,position:new google.maps.LatLng(t.googlemap_point[0],t.googlemap_point[1]),map:ee,title:t.title,visible:!1}))})}}),u),h)),ae.register_layer(((g=new ge("food")).markers=(i=[],s=[],r=15e4,c={url:P+"images/markers/food.png",size:new google.maps.Size(25,25)},$.ajax({url:B,dataType:"json",async:!1,success:function(e){void 0!==e.features&&$.each(e.features,function(e,t){var a=t.geometry.coordinates,o=!1;$.each(s,function(e,t){if(a[0]==t.lat&&a[1]==t.lon){var n=t.count;return n%2==0?(a[0]=a[0]+(n+re())/r,a[1]=n%4==0?a[1]+(n+re())/r:a[1]-(n+re())/r):(a[0]=a[0]-(n+re())/r,t.odd_flip?(a[1]=a[1]+(n+re())/r,t.odd_flip=!1):(a[1]=a[1]-(n+re())/r,t.odd_flip=!0)),o=!0,t.count+=1,!1}}),o||s.push(new se(a[0],a[1])),i.push(new google.maps.Marker({icon:c,position:new google.maps.LatLng(a[0],a[1]),title:t.properties.name,map:ee,visible:!1}))})}}),i),g)),o=!1,$.each(J,function(e,t){var n=ae.get_layer(t);null!=n&&(n.activate(),o=!0,"parking"==n.name&&ne.change_tabs({label:"Parking",html:$("#parking-key-content").html()}))}),isDesktopWidth&&(o||(n.illustrated?ae.get_layer("ipoints").toggle():ae.get_layer("gpoints").toggle())),function(){$.each(ae.layers,function(e,t){t.name;var n=$('input[type="checkbox"][id="'+t.name+'"]');t.active&&(-1!==t.name.search("emergency")&&$("#emergency").attr("checked",!0),n.attr("checked","checked")),n.click(function(){"parking"==$(this).attr("id")&&$(this).is(":checked")&&ne.change_tabs({label:"Parking",html:$("#parking-key-content").html()}),t.toggle();var e=!1;for(l in E)1==ae.get_layer(E[l]).active&&(e=!0);$("#emergency").attr("checked",e)})}),$("#shuttle-routes").click(function(){$(this).is(":checked")&&ne.change_tabs({label:"Shuttles",html:$("#shuttle-info").clone(!0,!0).show()})}),$("#shuttle-info-button").click(function(e){e.preventDefault(),ne.change_tabs({label:"Shuttles",html:$("#shuttle-info").clone(!0,!0).show()})});var t=$("#emergency, .emergency-btn");t.click(function(){if($(this).is(":checked")){var e=$("#emergency-content").clone(!0,!0).show();ne.change_tabs({label:"Emergency",html:e},function(){for(l in e.find(".init-checked:not(:checked)").attr("checked",!0),t.attr("checked",!0),E)ae.get_layer(E[l]).activate()})}else{for(l in E)ae.get_layer(E[l]).deactivate();$('#emergency-content input[type="checkbox"](:checked)').attr("checked",!1)}})}(),$("#search > ul > li:not(.more)").live("click",function(){var e=$(this).find("a").attr("data-pk");e&&(ne.change_tabs({label:"Location",html:'<div class="item load">Loading...</div>'}),le.highlight_location(e,{func:function(e){ne.change_tabs({html:e.info})}})),te.hide_results()}).find("a").live("click",function(e){e.preventDefault()}),$("body").bind("search-result-highlighted",function(e){var t=$("#search-results").find(".hover").find("a").attr("data-pk");t&&(ne.change_tabs({label:"Location",html:'<div class="item load">Loading...</div>'}),le.highlight_location(t,{func:function(e){ne.change_tabs({html:e.info})},pan:!0}))})),null!=n.infobox_location_id&&le.highlight_location(n.infobox_location_id,{pan:!0})):ue("Unable to load google code")},getZoom=function(){return $width=$(window).width(),$width<295?14:296<$width&&$width<465||466<$width&&$width<768?15:769<$width&&$width<1600?16:17};function trackClick(e){var t=$(e.target).closest(".ga-tracking"),n=t.attr("data-category")?t.attr("data-category"):"",a=t.attr("data-action")?t.attr("data-action"):"",o=t.attr("data-label")?t.attr("data-label"):"";_gaq.push(["_trackEvent",n,a,o])}function trackShuttleClick(e){var t=$(e.target).text();_gaq.push(["_trackEvent","Shuttle Info","click",t])}function gaTracking(){$(".ga-tracking").live("mousedown",trackClick),$(".shuttle-info-wrapper").delegate("a","mousedown",trackShuttleClick)}$(gaTracking),$.fn.equalHeights=function(e){return $(this).each(function(){var t=0;$(this).children().each(function(e){$(this).height()>t&&(t=$(this).height())}),$(this).children().css({"min-height":t})}),this};